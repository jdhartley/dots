var DOTS=function(){"use strict";var e=["g","p","r","b","y"],t=!1,n,r=[],i=0,s=function(){$(window).resize(function(){$("html, body").css("font-size",Math.min($("html").width(),$("html").height())/30)}).trigger("resize")[0].scrollTo(0,0);for(var e=0;e<6;e++)$("body").append($("<ul/>").each(function(){for(var e=0;e<6;e++)$(this).append(o())}));$("html, body").on("touchstart touchmove",function(e){e.preventDefault()});$("body").on("mousedown touchstart","li",function(e){e.preventDefault();e=u(e);var i=document.elementFromPoint(e.pageX,e.pageY);t=!0;n=$(i).addClass("active").attr("class").replace("active","").trim();r.push(i)}).on("mousemove touchmove","li",function(e){e=u(e);var i=document.elementFromPoint(e.pageX,e.pageY);if(!t)return;if(n!==$(i).attr("class").replace("active","").trim())return;var s=$("li"),o=s.index($(i)),f=!1,l=-1;if(r.length>0){f=$(r[r.length-1]);l=s.index(f);if(o!==l&&o+6!==l&&o-6!==l&&o+1!==l&&o-1!==l)return;if(o===s.index($(r[r.length-2]))){f.removeClass("active");r.pop();$("body").hasClass("inSquare")&&!a()&&$("body").removeClass("inSquare");return}}if(!$(i).hasClass("active")||o!==l){$(i).addClass("active");r.push(i);a()&&$("body").addClass("inSquare")}}).on("mouseup touchend",function(){t=!1;r.length>1&&$(a()?$("."+n):r).trigger("dotRemove");r=[];$("li.active").removeClass("active");$("body").removeClass("inSquare")}).on("dotRemove","li",function(){var e=$(this);$(this).parent().append(o());setTimeout(function(){e.remove()},0)})},o=function(){return $("<li/>").addClass(e[Math.floor(Math.random()*5)]).attr("id","d"+ ++i)},u=function(e){return e.originalEvent.touches&&e.originalEvent.touches.length?e.originalEvent.touches[0]:e.originalEvent.changedTouches&&e.originalEvent.changedTouches.length?e.originalEvent.changedTouches[0]:e},a=function(){var e=$(r).map(function(){return this.id}),t={};for(var n=0;n<e.length;n++){if(Object.prototype.hasOwnProperty.call(t,e[n]))return!0;t[e[n]]=!0}return!1};return{init:s}}();$(DOTS.init);