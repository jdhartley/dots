var DOTS=function(){"use strict";var e=["g","p","r","b","y"],t=!1,n,r=[],i=0,s=function(){for(var e=0;e<6;e++)$("body").append($("<ul/>").each(function(){for(var e=0;e<6;e++)$(this).append(o())}));$("html, body").on("touchstart touchmove",function(e){e.preventDefault()});$("body").on("mousedown touchstart","li",function(e){e.preventDefault();e=u(e);var i=document.elementFromPoint(e.pageX,e.pageY);t=!0;n=$(i).addClass("active").attr("class").replace("active","").trim();r.push(i)}).on("mousemove touchmove","li",function(e){e=u(e);var i=document.elementFromPoint(e.pageX,e.pageY);if(!t)return;if(n!==$(i).attr("class").replace("active","").trim())return;var s=$("li"),o=s.index($(i));if(r.length>1){var a=$(r[r.length-1]),f=s.index(a);if(o!==f&&o+6!==f&&o-6!==f&&o+1!==f&&o-1!==f)return;if(o===s.index($(r[r.length-2]))){a.removeClass("active");r.pop();return}}if(!$(i).hasClass("active")){$(i).addClass("active");r.push(i)}}).on("mouseup touchend",function(){t=!1;r.length>1&&$(r).trigger("dotRemove");r=[];$("li.active").removeClass("active")}).on("dotRemove","li",function(){var e=$(this);$(this).parent().append(o());setTimeout(function(){e.remove()},0)})},o=function(){return $("<li/>").addClass(e[Math.floor(Math.random()*5)]).attr("id","d"+ ++i)},u=function(e){return e.originalEvent.touches&&e.originalEvent.touches.length?e.originalEvent.touches[0]:e.originalEvent.changedTouches&&e.originalEvent.changedTouches.length?e.originalEvent.changedTouches[0]:e};return{init:s}}();$(DOTS.init);